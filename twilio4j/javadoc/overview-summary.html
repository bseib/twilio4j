<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_10) on Mon Apr 30 17:33:20 EDT 2012 -->
<TITLE>
Overview
</TITLE>

<META NAME="date" CONTENT="2012-04-30">

<LINK REL ="stylesheet" TYPE="text/css" HREF="stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Overview";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Overview</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Package</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Use</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="index.html?overview-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="overview-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
twilio4j
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#overview_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Packages</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="20%"><B><A HREF="com/twilio/sdk/package-summary.html">com.twilio.sdk</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="20%"><B><A HREF="com/twilio/sdk/verbs/package-summary.html">com.twilio.sdk.verbs</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="20%"><B><A HREF="com/twilio4j/twiml/package-summary.html">com.twilio4j.twiml</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="20%"><B><A HREF="com/twilio4j/twism/package-summary.html">com.twilio4j.twism</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="20%"><B><A HREF="com/twilio4j/twism/eg/package-summary.html">com.twilio4j.twism.eg</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="20%"><B><A HREF="com/twilio4j/util/package-summary.html">com.twilio4j.util</A></B></TD>
<TD>&nbsp;</TD>
</TR>
</TABLE>

<P>
&nbsp;<A NAME="overview_description"><!-- --></A>
<P>
<h1>twilio4j</h1>

<p>As of April 30, 2012, the <b>twilio4j</b> java library contains two parts. Part 1 has always been part of twilio4j.
Part 2 has been added so that the <b>Twilio java client library</b> can be used on Google AppEngine.</p>
<ul>
  <li>
  Part 1 is the <b>Twilio state machine library</b> which allows you to create call flows easily in java. You can
  install one servlet and implement your code that reacts to Twilio callback hooks with TWimL, etc.
  All of this Part 1 code lives in the com.twilio4j namespace.
  </li>
  <li>Part 2 is the original <b>Twilio java client library</b> (it is 99% written by Twilio, with a couple minor
  bug fixes.) Why include this here? Because the <a href="https://github.com/twilio/twilio-java">
  present day official Twilio-java library</a> has third
  party dependencies that do not run on AppEngine. For as simple as this client lib is, I don't see the
  need for these external dependencies. Any external dependencies just makes it harder
  to grab the jar and be productive. (I am also annoyed by the use of maven. Sorry -- I love you
  Twilio guys, but I have <i>very</i> little love for maven.) All of this Part 2 code lives in the com.twilio.sdk namespace.
  </li> 
</ul>

<h2>Twilio java client library</h2>
<p>
The javadocs for the original <b>Twilio java client library</b> are in the
<a href="http://twilio4j.googlecode.com/svn/trunk/twilio4j/javadoc/com/twilio/sdk/package-summary.html">com.twilio.sdk namespace.</a>
These docs are somewhat sparse and could use some more flesh. My advice is to download the sources for this project and look at
TwilioRestClient.java and TwilioRestExample.java. All the .java files in com.twilio.sdk.verbs have a one-to-one match with the
<a href="http://www.twilio.com/docs/api/rest">docs at twilio.com</a>. The proper next step would be to provide a GAE-friendly patch to
the original twilio-java project.
</p>

<h2>Twilio state machine library</h2>
<p>TwilioStateMachineServlet is the class you need to extend in order to create your own call flow
state machine. First you must create an enumerated type that represents all the states of
your machine. This enum is used to "type" the TwilioStateMachineServlet when you extend it.</p>

<p>You don't override any member functions in your subclass. Instead, you just supply a
constructor, where you repeatedly call handler() to populate your state machine. And
for each hander(), you call respondsWith() and supply straight TwiML statements, or
a code block if you need to supply java code plus TwiML.</p>

<p>Example:</p>
<code>
<pre>
import com.twilio4j.twiml.TwiML;
import com.twilio4j.twism.TwilioParameters;
import com.twilio4j.twism.TwilioStateMachineServlet;

import static com.twilio4j.twism.eg.NumberGameState.*;

public class NumberGameStateMachineServlet extends TwilioStateMachineServlet&lt;NumberGameState&gt; {
        private static final long serialVersionUID = 1L;
        
        public NumberGameStateMachineServlet() {
                handler(PICK_NUMBER).respondsWith(
                        gather(
                                say("pick a number between zero and nine.")
                        )
                        .action(CHECK_NUMBER)
                        .numDigits(1)
                );
                handler(CHECK_NUMBER).respondsWith(new TwilioHandler() {
                        public TwiML getTwiML(TwilioParameters params) {
                                char digit = params.Gather().getDigits().charAt(0);
                                if ( digit == '5' ) {
                                        return say("You win! Goodbye.");
                                } else if ( digit &lt; '5' ) {
                                        return gather(
                                                say("Pick again, higher.")
                                        )
                                        .action(CHECK_NUMBER)
                                        .numDigits(1);
                                } else {
                                        return gather(
                                                say("Pick again, lower.")
                                        )
                                        .action(CHECK_NUMBER)
                                        .numDigits(1);
                                }
                        }
                });
        }

        public NumberGameState getInitialState() {
                return PICK_NUMBER;
        }
        public NumberGameState lookupState(String pathInfo) {
                return NumberGameState.valueOf(pathInfo);
        }
        public String getFortyCharacterSecret() {
                return "3440e0fa2eae0a28e5dc58d76793eb151c19acf7";
        }
}
</pre>
</code>
<P>

<P>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Overview</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Package</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Use</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="overview-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="index.html?overview-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="overview-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
